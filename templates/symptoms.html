<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>CareConnect - Symptom Entry</title>
  <link rel="stylesheet" href="/static/css/symptoms.css" />
</head>
<body>
  <div id="particles-js"></div>

  <div class="container">

    <!-- Stepbar -->
    <div class="stepbar">
      <div class="active">1</div>
      <div>2</div>
      <div>3</div>
      <div>4</div>
      <div>5</div>
      <div>6</div>
      <div>7</div>
    </div>

<!-- Symptom Entry Form -->
<div class="symptoms-container">
  <h2>Describe Your Symptoms</h2>

  <form id="symptoms-form" action="/symptoms" method="POST">
    <!-- Voice Input Button & Status -->
    <div class="voice-input" style="margin-bottom:12px;">
      <button type="button" id="recordBtn" title="Record your symptoms">üéôÔ∏è</button>
      <span id="recordStatus">Click to start recording</span>
    </div>

    <!-- Language selector -->
    <label for="languageSelect">Language for SOAP Report:</label>
    <select id="languageSelect" name="language" aria-label="Select input language">
      <option value="en-IN" selected>English</option>
      <option value="hi-IN">Hindi (‡§π‡§ø‡§Ç‡§¶‡•Ä)</option>
      <option value="or-IN">Odia (‡¨ì‡¨°‡¨º‡¨ø‡¨Ü)</option>
    </select>

    <!-- Canonical English textarea (submitted as `symptoms`) -->
    <label for="symptoms">Enter your symptoms (English):</label>
    <textarea
      id="symptoms"
      name="symptoms"
      placeholder="e.g. Fever, cough, fatigue...| Created by Shadab"
      required
      aria-describedby="symptoms-help"
    ></textarea>
    <div id="symptoms-help" class="sr-only">This is the main symptoms field submitted to the server.</div>

    <!-- Local-language textarea (hidden by default; show when language != en-IN) -->
    <div id="local-input-wrapper" class="hidden" aria-hidden="true" style="margin-top:12px;">
      <label for="symptoms_local">Write in selected language (optional):</label>
      <textarea
        id="symptoms_local"
        name="symptoms_local"
        placeholder="Type here in Odia / Hindi ‚Äî then click Translate (or use voice to auto-fill)."
        aria-describedby="local-help"
      ></textarea>

      <div class="local-controls" style="margin-top:8px;">
        <button type="button" id="translateLocalBtn" class="btn" disabled aria-disabled="true">Translate</button>
        <span id="translateStatus" role="status" aria-live="polite" style="margin-left:10px;"></span>
      </div>

      <div id="local-help" class="help-text" style="font-size:0.9rem; color: #9ca3af; margin-top:6px;">
        Type in the local language and click Translate to populate the English field. Voice input will auto-fill both.
      </div>
    </div>

    <!-- Transcription display (filled by JS) -->
    <div id="transcription-display" style="display:none; margin-top:14px;" aria-live="polite" class="transcription-pair">
      <div class="transcription-col transcription-original" style="margin-bottom:8px;">
        <strong>Original:</strong>
        <div id="transcription-original-text"></div>
      </div>

      <div class="transcription-col transcription-translated" style="margin-bottom:8px;">
        <strong>English:</strong>
        <div id="transcription-translated-text"></div>
      </div>
    </div>

    <!-- Submit choice: which content should be sent as the canonical `symptoms` value -->
    <fieldset id="submit-choice" class="submit-choice" aria-label="Submit choice" style="margin-top:12px; border: none; padding:0;">
      <legend style="font-weight:600; margin-bottom:8px;">What should we submit?</legend>

      <label style="display:block; margin-bottom:6px;">
        <input type="radio" name="submit_mode" value="english" id="chooseEnglish" checked>
        Submit English (default)
      </label>

      <label style="display:block; margin-bottom:6px;">
        <input type="radio" name="submit_mode" value="local" id="chooseLocal">
        Submit Local language
      </label>

      <label style="display:block; margin-bottom:6px;">
        <input type="radio" name="submit_mode" value="both" id="chooseBoth">
        Submit Both (Local + English)
      </label>
    </fieldset>

    <!-- Hidden fields to preserve raw texts (optional, posted but ignored by existing server) -->
    <input type="hidden" id="original_text_hidden" name="original_text" value="">
    <input type="hidden" id="translated_text_hidden" name="translated_text" value="">

    <!-- Severity (unchanged) -->
    <label for="severity" style="margin-top:10px; display:block;">How severe is it?</label>
    <div class="severity-bar" style="display:flex; align-items:center; gap:10px; margin-top:6px;">
      <input
        type="range"
        id="severity"
        name="severity"
        min="0"
        max="10"
        value="5"
      />
      <span id="severity-value">5</span>/10
    </div>

    <!-- Continue button (unchanged) -->
    <div style="margin-top:16px;">
      <button type="submit" class="submit-btn">Continue</button>
    </div>
  </form>
</div>

  <script src="/static/js/symptoms.js"></script>

<script src="/static/js/particles.min.js"></script>

<footer style="margin-top:auto; background:#111827; color:#9ca3af; text-align:center; padding:20px 0; font-size:0.9rem; position:relative; z-index:1;">
  ¬© 2025 | Solo-built and maintained by Shadab with ‚ù§Ô∏è for tech & innovation.
</footer>

  
<script>
window.onload = function () {
  particlesJS("particles-js", {
    "particles": {
      "number": { "value": 360, "density": { "enable": true, "value_area": 800 } },
      "color": { "value": "#a855f7" },
      "shape": { "type": "circle" },
      "opacity": {
        "value": 0.6,
        "random": true,
        "anim": { "enable": true, "speed": 1, "opacity_min": 0.1 }
      },
      "size": {
        "value": 3,
        "random": true,
        "anim": { "enable": true, "speed": 4, "size_min": 0.3 }
      },
      "line_linked": {
        "enable": true,
        "distance": 130,
        "color": "#a855f7",
        "opacity": 0.4,
        "width": 1
      },
      "move": {
        "enable": true,
        "speed": 3.5,
        "direction": "none",
        "out_mode": "bounce",
        "bounce": true
      }
    },
    "interactivity": {
      "detect_on": "canvas",
      "events": {
        "onhover": { "enable": true, "mode": "repulse" },
        "onclick": { "enable": true, "mode": "push" }
      },
      "modes": {
        "repulse": { "distance": 150, "duration": 0.6 },
        "push": { "particles_nb": 4 }
      }
    },
    "retina_detect": true
  });
};
</script>

</body>
</html>
